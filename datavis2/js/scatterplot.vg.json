{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": { "url": "data/earthquakes.csv" },
  "transform": [
    {
        "calculate": "datum.continent[0] + datum.continent[1]",
        "as": "CountryInitials"
    }
  ],
  "width": 300,
  "height": 200,
  "title": "Scatterplot of Earthquake Magnitudes vs Depth",
  "mark": "text",
  "params": [
    {
      "name": "Continent",
      "select": { "type": "point", "fields": ["continent"] },
      "bind": {
        "input": "select",
        "options": [
          null,
          "North America",
          "Asia",
          "Oceania"
        ]
    }
    }
  ],
  "encoding": {
    "text": {"field": "CountryInitials","type":"nominal"},
    "tooltip": [
        {"field": "continent"},
        {"field": "country"},
        {"field": "magnitude","type":"ordinal"},
        {"field": "depth","type":"quantitative"},
        {"field":"date","type":"temporal"}        
    ],
    "x": {
      "field": "magnitude",
      "type": "quantitative",
      "axis": {
        "title":"Earthquake Magnitude (Richter Scale)"
      }
    },
    "y": {
      "field": "depth",
      "type": "quantitative",
      "axis": {
        "title":"Earthquake Depth (km)"
      }
    },
    "color": {
      "condition": {
        "param": "Continent",
        "field": "cdi",
        "legend": {"title": "Community Determined Intensity"},
        "type": "quantitative"
      },
      "value": "grey"
    }
  },
  "config": {
    "view": {
      "stroke": "transparent"
    }
  }
}
